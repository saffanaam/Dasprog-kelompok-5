#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

void balikString(char str[]) {
  int i = 0;
  int j = strlen(str) - 1;
  char temp;
  while (i<j) {
  temp = str[i];
  str[i] = str[j];
  str[j] = temp;
  i++;
  j--;
 }
}
//kalku hukum ohm
void kalkulatorOhm() {
  int pilihan;
  double V,I,R;

printf("\n--- Kalkulator Hukum Ohm ---\n");
printf("Ingin menghitung apa?\n");
printf("1. Tegangan (V)\n");
printf("2. Arus (I)\n");
printf("3. Hambatan (R)\n");
printf("Pilihan : ");
scanf("%d", &pilihan);

switch (pilihan) {
  case 1:
   printf("Masukkan Arus (I): ");
   scanf("%lf", &I);
   printf("Masukkan Hambatan (R): ");
   scanf("%lf", &R);
   V = I*R;
   printf("Tegangan (V) = %.3lf Volt\n", V);
  break;

  case 2:
   printf("Masukkan Tegangan (V): ");
   scanf("%lf", &V);
   printf("Masukkan Hambatan (R): ");
   scanf("%lf", &R);
   I = V/R;
   printf("Arus (I) = %.3lf Ampere\n", I);
  break;

  case 3:
   printf("Masukkan Tegangan (V): ");
   scanf("%lf", &V);
   printf("Masukkan Arus (I): ");
   scanf("%lf", &I);
   R = V/I;
   printf("Hambatan (R) = %.3lf Ohm\n", R);
  break;
  default:
   printf("Pilihan tidak valid.\n");
 }
}

//Kalku Daya Listrik

void power() {
  double V,I,P;
  printf("\n--- Kalkulator Daya Listrik ---\n");
  printf("Masukkan Tegangan (V) : ");
  scanf("%lf", &V);
  printf("Masukkan Arus (I) : ");
  scanf("%lf", &I);

  P = V*I;
  printf("Daya = %.3lf Watt\n", P);
}

//Resistor Seri

void ResistorS() {
 int n;
 double R, total = 0;
 printf("\n--- Kalkulator Resistor Seri ---\n");
 printf("Masukkan jumlah resistor : ");
 scanf("%d", &n);

 for(int i = 1; i<=n; i++) {
  printf("Masukkan nilai Resistor %d : ",i);
  scanf("%lf", &R);
  total += R;
 }
 printf("Total Hambatan Seri = %.3lf Ohm\n", total);
}

//Resistor Paralel

void ResistorP() {
 int n;
 double R, sum = 0;
 printf("\n--- Kalkulator Resistor Paralel ---\n");
 printf("Masukkan jumlah resistor : ");
 scanf("%d", &n);

 for(int i = 1; i<=n; i++) {
  printf("Masukkan nilai Resistor %d : ",i);
  scanf("%lf", &R);
  sum += 1.0/R;
 }

 double total = 1.0/sum;
 printf("Total Hambatan Paralel = %.3lf Ohm\n", total);
}

//Konversi bilangan 
//Desimal -> Biner / Oktal / Hex

void desimalKonversi() {
  long long desimal;
  printf("\nKonversi dari Desimal\n");
  printf("Masukkan bilangan desimal: ");
  scanf("%lld", &desimal);
  long long d;

//Biner
  char bin[100];
  int idx = 0;
  d = desimal;

  if (d == 0) strcpy(bin, "0");
  else {
    while (d > 0) {
    bin[idx++] = (d % 2) + '0';
    d /= 2;
  }
  bin[idx] = '\0';
  balikString(bin);
}

//Oktal
char okt[100];
idx = 0;
d = desimal;

 if (d == 0) strcpy(okt, "0");
    else {
      while (d > 0) {
        okt[idx++] = (d % 8) + '0';
          d /= 8;
        }
        okt[idx] = '\0';
        balikString(okt);
    }

//Hex
char hex[100];
idx = 0;
d = desimal;

  if (d == 0) strcpy(hex, "0");
    else {
        while (d > 0) {
            int r = d % 16;
            hex[idx++] = (r < 10) ? (r + '0') : (r - 10 + 'A');
            d /= 16;
        }
        hex[idx] = '\0';
        balikString(hex);
    }

    printf("\nHasil Konversi:\n");
    printf("- Biner        : %s\n", bin);
    printf("- Oktal        : %s\n", okt);
    printf("- Heksadesimal : %s\n", hex);
}

//Biner -> Desimal
void binerKeDesimal() {
    char bin[100];
    printf("\nKonversi Biner ke Desimal\n");
    printf("Masukkan bilangan biner: ");
    scanf("%s", bin);

    long long desimal = 0;
    for (int i = 0; bin[i] != '\0'; i++) {
        desimal = desimal * 2 + (bin[i] - '0');
    }

    printf("Hasil: %lld\n", desimal);
}

//Oktal -> Desimal
void oktalKeDesimal() {
    char okt[100];
    printf("\nKonversi Oktal ke Desimal\n");
    printf("Masukkan bilangan oktal: ");
    scanf("%s", okt);

    long long desimal = 0;
    for (int i = 0; okt[i] != '\0'; i++) {
        desimal = desimal * 8 + (okt[i] - '0');
    }

    printf("Hasil: %lld\n", desimal);
}

//Hex -> Desimal
void hexKeDesimal() {
    char hex[100];
    printf("\nKonversi Hex ke Desimal\n");
    printf("Masukkan bilangan heksadesimal: ");
    scanf("%s", hex);

    long long desimal = 0;

    for (int i = 0; hex[i] != '\0'; i++) {
        char c = hex[i];
        int val;

        if (c >= '0' && c <= '9') val = c - '0';
        else if (c >= 'A' && c <= 'F') val = c - 'A' + 10;
        else if (c >= 'a' && c <= 'f') val = c - 'a' + 10;

        desimal = desimal * 16 + val;
    }

    printf("Hasil: %lld\n", desimal);
}

int main (){
    int choice;
      do {
      system("clear");

printf("==========================================\n");
printf("   TOOLKIT LENGKAP ASISTEN LAB ELEKTRO\n");
printf("==========================================\n");
      printf("1. Kalkulator Hukum Ohm\n");
      printf("2. Kalkulator Daya Listrik\n");
      printf("3. Kalkulator Resistor Seri\n");
      printf("4. Kalkulator Resistor Paralel\n");
      printf("5. Desimal -> Biner\n");
      printf("6. Biner -> Desimal\n");
      printf("7. Oktal -> Desimal\n");
      printf("8. Hex -> Desimal\n");
      printf("9. Keluar\n");

printf("------------------------------------------\n");
      printf("Masukkan pilihan yang diinginkan: ");
      scanf("%d", &choice);

getchar();
switch(choice){
      case 1: kalkulatorOhm();
      break;
      case 2: power();
      break;
      case 3: ResistorS();
      break;
      case 4: ResistorP();
      break;
      case 5: desimalKonversi();
      break;
      case 6: binerKeDesimal();
      break;
      case 7: oktalKeDesimal();
      break;
      case 8: hexKeDesimal();
      break;
      case 9:
            printf("Terima kasih telah menggunakan toolkit!\n");
      break;
    default:
      printf("Pilihan tidak valid!\n");
  }
printf("\nTekan enter untuk kembali ke menu");
      getchar();

  } while (choice !=9);

  return 0;
}
